# GitHub-issues-flow

## 概要

GitHub-flowをベースに、チケット駆動開発を取り込んだ開発者ファーストのブランチ戦略。チケットとしてイシューを利用する。  

## フローイメージ

![github-issues-flow](github-issues-flow.drawio.svg)

## ブランチの種類

### main

最新を管理するブランチ。  
このブランチで作業は行わない（タグおよびリリースの作成のみ可）。リリースベースではなく開発ベース（環境設定等）。  

### work

作業ブランチ。基本的にはイシュー単位で作成する。    
mainブランチからworkブランチを作成し、作業が完了次第mainブランチへマージまたはプルリクエストを行う。  
作業の規模が大きい場合は、workブランチから子workブランチを作成する。  

### release

リリースブランチ。  
リリースする環境ごとにmainブランチから作成する。  
主に環境設定ファイルの変更、維持を目的とする。  

## 作業フロー

### 1. イシューを作成

実装やバグ修正の要件をイシュー化する。  
イシューの種別（feature/bugfix/hotfix等）をラベルで区別できると綺麗に管理できる。

例）
- 実装フェーズ：機能開発イシュー
- テストフェーズ：バグ報告イシュー
- メンテナンスフェーズ：緊急対応イシュー, 追加機能開発イシュー

### 2. イシューに対応するブランチを作成

mainブランチからイシューに対応するworkブランチ作成する。  
ブランチ名は`work/#[issue number]`。ネストするなら以降をスラッシュ区切りでタイトルを付ける。  

※ ブランチ名のプレフィックスを`feature/`や`bugfix/`、`hotfix/`に変更することで、Git-flowに寄せた運用も可。  

### 3. 作業＆コミット

割愛。コミットのコメントにイシュー番号を含める。

### 4. マージ／プルリクエスト＆イシューのクローズ

イシューの対応が完了したらmainブランチへマージを行う。
マージのコメントに`close #[issue number]`を入れることで、同時にイシューもクローズ。  
マージ完了後、workブランチを削除。

### 5. タグを作成（任意）

必要であればタグを作成する。リリースノートも作成するとなお良い。

## メリット

- プロジェクトの規模を選ばない
- ブランチの種類がmainとwork、releaseの３つだけとシンプルかつ役割が明確
- mainブランチが常にリリース可能で、客先への公開（α版、β版、RC版等）が容易
- プルリクエスト（レビュー）を使用して、一定の品質を保てる
- ブランチの運用をイシュー（およびマイルストーン）の運用で補助できる
  - イシューのラベルを用いて機能開発や不具合対応の区別
  - 作業内容、担当、期限、進捗状況等の情報の視覚化と共有
  - コミットに対する情報をイシューのコメントで補足

## デメリット

- イシューが利用可能なホスティングサービス（GitHub等）が必須
- イシューの運用方法も考える必要がある
- 緊急対応と追加対応が重なるとmainブランチの状態が複雑になり、リリース内容の調整が難しくなる
- 複数バージョンのメンテナンスが出来ない
  - → 案１）Fork（他バージョンの変更を取り込む作業が面倒
  - → 案２）過去バージョンのブランチグループを作成する（ブランチが増えて見通しが悪くなる